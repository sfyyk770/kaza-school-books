<html><head><base href="https://www.booksforkids.com/admin/books">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SchoolBookExpress Admin - Books Management</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet">
    <style>
      :root {
        --primary-color: #4a90e2;
        --secondary-color: #50c878;
        --accent-color: #ffa500;
        --background-color: #f8f9fa;
        --text-color: #333333;
        --white: #ffffff;
        --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        --transition: all 0.3s ease;
      }
    
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
    
      body {
        font-family: 'Poppins', sans-serif;
        line-height: 1.6;
        color: var(--text-color);
        background-color: var(--background-color);
      }
    
      .container {
        max-width: 1600px;
        margin: 0 auto;
        padding: 20px;
      }
    
      header {
        background: var(--primary-color);
        color: var(--white);
        padding: 20px 0;
        box-shadow: var(--shadow);
      }
    
      .logo {
        font-size: 1.8rem;
        font-weight: 600;
        color: var(--white);
        text-decoration: none;
        display: flex;
        align-items: center;
      }
    
      .logo i {
        margin-right: 10px;
      }
    
      nav ul {
        display: flex;
        justify-content: flex-end;
        list-style: none;
      }
    
      nav li {
        margin-left: 20px;
      }
    
      nav a {
        color: var(--white);
        text-decoration: none;
        font-weight: 400;
        transition: var(--transition);
      }
    
      nav a:hover {
        color: var(--accent-color);
      }
    
      h1, h2, h3 {
        margin-bottom: 20px;
      }
    
      .btn {
        display: inline-block;
        background: var(--secondary-color);
        color: var(--white);
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: var(--transition);
        text-decoration: none;
        font-size: 0.9rem;
      }
    
      .btn:hover {
        background: #45b363;
        transform: translateY(-2px);
      }
    
      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-top: 30px;
        background: var(--white);
        box-shadow: var(--shadow);
        border-radius: 8px;
        overflow: hidden;
      }
    
      th, td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid #e0e0e0;
      }
    
      th {
        background-color: #f1f3f5;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
        color: #555;
      }
    
      tr:last-child td {
        border-bottom: none;
      }
    
      tr:hover {
        background-color: #f8f9fa;
      }
    
      .action-buttons {
        display: flex;
        gap: 5px;
      }
    
      .action-buttons .btn {
        padding: 5px 10px;
        font-size: 0.8rem;
      }
    
      .btn-view {
        background: var(--primary-color);
      }
    
      .btn-view:hover {
        background: #3a7abd;
      }
    
      .btn-edit {
        background: var(--accent-color);
      }
    
      .btn-edit:hover {
        background: #e69500;
      }
    
      .btn-delete {
        background: #e74c3c;
      }
    
      .btn-delete:hover {
        background: #c0392b;
      }
    
      .filters {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        flex-wrap: wrap;
        gap: 10px;
      }
    
      .search-bar {
        display: flex;
        align-items: center;
        background: var(--white);
        border-radius: 25px;
        padding: 5px 15px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      }
    
      .search-bar input {
        border: none;
        padding: 10px;
        font-size: 1rem;
        outline: none;
        width: 200px;
      }
    
      .search-bar .btn {
        background: none;
        color: var(--primary-color);
        padding: 10px;
      }
    
      .search-bar .btn:hover {
        color: var(--accent-color);
      }
    
      .category-filter select,
      #rows-per-page {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 25px;
        font-size: 0.9rem;
        outline: none;
        background-color: var(--white);
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        background-image: url('data:image/svg+xml;utf8,<svg fill="%23333" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
        background-repeat: no-repeat;
        background-position: right 10px center;
        padding-right: 30px;
      }
    
      .pagination {
        display: flex;
        justify-content: center;
        margin-top: 20px;
        gap: 10px;
      }
    
      .pagination .btn {
        background: var(--white);
        color: var(--primary-color);
        border: 1px solid var(--primary-color);
      }
    
      .pagination .btn:hover {
        background: var(--primary-color);
        color: var(--white);
      }
    
      .stock-badge {
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
        text-transform: uppercase;
      }
    
      .in-stock { background-color: #c3e6cb; color: #155724; }
      .low-stock { background-color: #ffeeba; color: #856404; }
      .out-of-stock { background-color: #f8d7da; color: #721c24; }
    
      .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.4);
      }
    
      .modal-content {
        background-color: #fefefe;
        margin: 5% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 800px;
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      }
    
      .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
        transition: var(--transition);
      }
    
      .close:hover,
      .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
      }
    
      .book-details {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }
    
      .book-details h3 {
        grid-column: 1 / -1;
        border-bottom: 2px solid #e0e0e0;
        padding-bottom: 10px;
        margin-top: 20px;
        color: var(--primary-color);
      }
    
      .book-cover {
        grid-column: 1 / -1;
        text-align: center;
      }
    
      .book-cover img {
        max-width: 200px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        border-radius: 4px;
      }
    
      #editBookForm {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }
    
      #editBookForm .form-group {
        margin-bottom: 15px;
      }
    
      #editBookForm label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
        color: #555;
      }
    
      #editBookForm input,
      #editBookForm select,
      #editBookForm textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
        transition: var(--transition);
      }
    
      #editBookForm input:focus,
      #editBookForm select:focus,
      #editBookForm textarea:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
      }
    
      #editBookForm textarea {
        height: 100px;
        resize: vertical;
      }
    
      #editBookForm .full-width {
        grid-column: 1 / -1;
      }
    
      #updateBookBtn {
        grid-column: 1 / -1;
        justify-self: center;
        margin-top: 20px;
        padding: 12px 24px;
        font-size: 1rem;
      }
    
      .sort-icon {
        margin-left: 5px;
        color: #999;
        cursor: pointer;
      }
    
      .sort-icon:hover {
        color: var(--primary-color);
      }
    
      .column-filter {
        position: relative;
        display: inline-block;
      }
    
      .column-filter-icon {
        margin-left: 5px;
        color: #999;
        cursor: pointer;
      }
    
      .column-filter-icon:hover {
        color: var(--primary-color);
      }
    
      .column-filter-dropdown {
        display: none;
        position: absolute;
        background-color: #fff;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        z-index: 1;
        border-radius: 4px;
        padding: 10px;
      }
    
      .column-filter-dropdown input {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
      }
    
      .column-filter-dropdown button {
        width: 100%;
        padding: 8px;
        background-color: var(--primary-color);
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
    
      .column-filter-dropdown button:hover {
        background-color: #3a7abd;
      }
    
      .export-btn {
        background-color: var(--accent-color);
        color: var(--white);
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: var(--transition);
        font-size: 0.9rem;
        margin-left: 10px;
      }
    
      .export-btn:hover {
        background-color: #e69500;
      }
    
      .add-book-btn {
        background-color: var(--secondary-color);
        color: var(--white);
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: var(--transition);
        font-size: 0.9rem;
        margin-right: 10px;
      }
    
      .add-book-btn:hover {
        background-color: #45b363;
      }
    </style>
    </head>
    <body>
      <header>
        <div class="container">
          <a href="/admin" class="logo"><i class="fas fa-book-open"></i> SchoolBookExpress Admin</a>
          <nav>
            <ul>
              <li><a href="/admin"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
              <li><a href="/admin/books"><i class="fas fa-book"></i> Books</a></li>
              <li><a href="/admin/orders"><i class="fas fa-shopping-cart"></i> Orders</a></li>
              <li><a href="/admin/users"><i class="fas fa-users"></i> Users</a></li>
              <li><a href="/admin/settings"><i class="fas fa-cog"></i> Settings</a></li>
              <li><a href="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
          </nav>
        </div>
      </header>
    
      <div class="container">
        <h1>Manage Books</h1>
        
        <div class="filters">
          <button class="add-book-btn"><i class="fas fa-plus"></i> Add New Book</button>
          <div class="search-bar">
            <input type="text" placeholder="Search books...">
            <button class="btn"><i class="fas fa-search"></i></button>
          </div>
          <div class="category-filter">
            <select>
              <option value="">All Categories</option>
              <option value="fiction">Fiction</option>
              <option value="non-fiction">Non-Fiction</option>
              <option value="science">Science</option>
              <option value="history">History</option>
              <option value="math">Mathematics</option>
            </select>
          </div>
          <div>
            <label for="rows-per-page">Rows per page:</label>
            <select id="rows-per-page">
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>
          <button class="export-btn"><i class="fas fa-file-export"></i> Export</button>
        </div>
    
        <table id="books-table">
          <thead>
            <tr>
              <th>
                ISBN
                <i class="fas fa-sort sort-icon" data-column="isbn"></i>
                <span class="column-filter">
                  <i class="fas fa-filter column-filter-icon" data-column="isbn"></i>
                  <div class="column-filter-dropdown">
                    <input type="text" placeholder="Filter ISBN">
                    <button>Apply</button>
                  </div>
                </span>
              </th>
              <th>
                Title
                <i class="fas fa-sort sort-icon" data-column="title"></i>
                <span class="column-filter">
                  <i class="fas fa-filter column-filter-icon" data-column="title"></i>
                  <div class="column-filter-dropdown">
                    <input type="text" placeholder="Filter Title">
                    <button>Apply</button>
                  </div>
                </span>
              </th>
              <th>
                Author
                <i class="fas fa-sort sort-icon" data-column="author"></i>
                <span class="column-filter">
                  <i class="fas fa-filter column-filter-icon" data-column="author"></i>
                  <div class="column-filter-dropdown">
                    <input type="text" placeholder="Filter Author">
                    <button>Apply</button>
                  </div>
                </span>
              </th>
              <th>
                Category
                <i class="fas fa-sort sort-icon" data-column="category"></i>
                <span class="column-filter">
                  <i class="fas fa-filter column-filter-icon" data-column="category"></i>
                  <div class="column-filter-dropdown">
                    <select>
                      <option value="">All Categories</option>
                      <option value="fiction">Fiction</option>
                      <option value="non-fiction">Non-Fiction</option>
                      <option value="science">Science</option>
                      <option value="history">History</option>
                      <option value="math">Mathematics</option>
                    </select>
                    <button>Apply</button>
                  </div>
                </span>
              </th>
              <th>
                Price
                <i class="fas fa-sort sort-icon" data-column="price"></i>
                <span class="column-filter">
                  <i class="fas fa-filter column-filter-icon" data-column="price"></i>
                  <div class="column-filter-dropdown">
                    <input type="number" placeholder="Min Price">
                    <input type="number" placeholder="Max Price">
                    <button>Apply</button>
                  </div>
                </span>
              </th>
              <th>
                Stock
                <i class="fas fa-sort sort-icon" data-column="stock"></i>
                <span class="column-filter">
                  <i class="fas fa-filter column-filter-icon" data-column="stock"></i>
                  <div class="column-filter-dropdown">
                    <input type="number" placeholder="Min Stock">
                    <input type="number" placeholder="Max Stock">
                    <button>Apply</button>
                  </div>
                </span>
              </th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <!-- Table rows will be dynamically populated here -->
          </tbody>
        </table>
    
        <div class="pagination">
          <a href="#" class="btn" id="prev-page"><i class="fas fa-chevron-left"></i> Previous</a>
          <span id="page-info">Page 1 of 1</span>
          <a href="#" class="btn" id="next-page">Next <i class="fas fa-chevron-right"></i></a>
        </div>
      </div>
    
      <!-- View Book Modal -->
      <div id="viewBookModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2>Book Details</h2>
          <div id="bookDetails" class="book-details">
            <!-- Book details will be dynamically populated here -->
          </div>
        </div>
      </div>
    
      <!-- Edit Book Modal -->
      <div id="editBookModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2>Edit Book</h2>
          <form id="editBookForm">
            <div class="form-group">
              <label for="editIsbn">ISBN:</label>
              <input type="text" id="editIsbn" required>
            </div>
            <div class="form-group">
              <label for="editTitle">Title:</label>
              <input type="text" id="editTitle" required>
            </div>
            <div class="form-group">
              <label for="editAuthor">Author:</label>
              <input type="text" id="editAuthor" required>
            </div>
            <div class="form-group">
              <label for="editCategory">Category:</label>
              <select id="editCategory" required>
                <option value="fiction">Fiction</option>
                <option value="non-fiction">Non-Fiction</option>
                <option value="science">Science</option>
                <option value="history">History</option>
                <option value="math">Mathematics</option>
              </select>
            </div>
            <div class="form-group">
              <label for="editPrice">Price:</label>
              <input type="number" id="editPrice" step="0.01" required>
            </div>
            <div class="form-group">
              <label for="editStock">Stock:</label>
              <input type="number" id="editStock" required>
            </div>
            <div class="form-group full-width">
              <label for="editDescription">Description:</label>
              <textarea id="editDescription" required></textarea>
            </div>
            <div class="form-group full-width">
              <label for="editCoverImage">Cover Image URL:</label>
              <input type="url" id="editCoverImage">
            </div>
            <button type="submit" id="updateBookBtn" class="btn">Update Book</button>
          </form>
        </div>
      </div>
    
      <!-- Add Book Modal -->
      <div id="addBookModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2>Add New Book</h2>
          <form id="addBookForm">
            <div class="form-group">
              <label for="addIsbn">ISBN:</label>
              <input type="text" id="addIsbn" required>
            </div>
            <div class="form-group">
              <label for="addTitle">Title:</label>
              <input type="text" id="addTitle" required>
            </div>
            <div class="form-group">
              <label for="addAuthor">Author:</label>
              <input type="text" id="addAuthor" required>
            </div>
            <div class="form-group">
              <label for="addCategory">Category:</label>
              <select id="addCategory" required>
                <option value="fiction">Fiction</option>
                <option value="non-fiction">Non-Fiction</option>
                <option value="science">Science</option>
                <option value="history">History</option>
                <option value="math">Mathematics</option>
              </select>
            </div>
            <div class="form-group">
              <label for="addPrice">Price:</label>
              <input type="number" id="addPrice" step="0.01" required>
            </div>
            <div class="form-group">
              <label for="addStock">Stock:</label>
              <input type="number" id="addStock" required>
            </div>
            <div class="form-group full-width">
              <label for="addDescription">Description:</label>
              <textarea id="addDescription" required></textarea>
            </div>
            <div class="form-group full-width">
              <label for="addCoverImage">Cover Image URL:</label>
              <input type="url" id="addCoverImage">
            </div>
            <button type="submit" id="addBookBtn" class="btn">Add Book</button>
          </form>
        </div>
      </div>
    
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script>
        $(document).ready(function() {
          const booksData = [
            {
              isbn: "9780061120084",
              title: "To Kill a Mockingbird",
              author: "Harper Lee",
              category: "Fiction",
              price: 12.99,
              stock: 50,
              description: "The unforgettable novel of a childhood in a sleepy Southern town and the crisis of conscience that rocked it.",
              coverImage: "https://example.com/to-kill-a-mockingbird-cover.jpg"
            },
            {
              isbn: "9780743273565",
              title: "The Great Gatsby",
              author: "F. Scott Fitzgerald",
              category: "Fiction",
              price: 15.99,
              stock: 35,
              description: "A portrait of the Jazz Age in all of its decadence and excess, Gatsby captured the spirit of the author's generation.",
              coverImage: "https://example.com/the-great-gatsby-cover.jpg"
            },
            {
              isbn: "9780385490818",
              title: "The Catcher in the Rye",
              author: "J.D. Salinger",
              category: "Fiction",
              price: 14.99,
              stock: 40,
              description: "The hero-narrator of The Catcher in the Rye is an ancient child of sixteen, a native New Yorker named Holden Caulfield.",
              coverImage: "https://example.com/the-catcher-in-the-rye-cover.jpg"
            },
            {
              isbn: "9780142000670",
              title: "Of Mice and Men",
              author: "John Steinbeck",
              category: "Fiction",
              price: 11.99,
              stock: 25,
              description: "A controversial tale of friendship and tragedy during the Great Depression.",
              coverImage: "https://example.com/of-mice-and-men-cover.jpg"
            },
            {
              isbn: "9780060850524",
              title: "Brave New World",
              author: "Aldous Huxley",
              category: "Science Fiction",
              price: 13.99,
              stock: 30,
              description: "Aldous Huxley's profoundly important classic of world literature, Brave New World is a searching vision of an unequal, technologically-advanced future where humans are genetically bred, socially indoctrinated, and pharmaceutically anesthetized to passively uphold an authoritarian ruling order.",
              coverImage: "https://example.com/brave-new-world-cover.jpg"
            }
          ];
    
          let currentPage = 1;
          let rowsPerPage = 10;
          let sortColumn = 'title';
          let sortOrder = 'asc';
          let filters = {};
    
          function renderTable() {
            const tableBody = $('#books-table tbody');
            tableBody.empty();
    
            let filteredData = booksData.filter(book => {
              return Object.keys(filters).every(key => {
                if (!filters[key]) return true;
                if (key === 'price' || key === 'stock') {
                  const [min, max] = filters[key];
                  const value = parseFloat(book[key]);
                  return (!min || value >= min) && (!max || value <= max);
                }
                return book[key].toString().toLowerCase().includes(filters[key].toLowerCase());
              });
            });
    
            filteredData.sort((a, b) => {
              if (a[sortColumn] < b[sortColumn]) return sortOrder === 'asc' ? -1 : 1;
              if (a[sortColumn] > b[sortColumn]) return sortOrder === 'asc' ? 1 : -1;
              return 0;
            });
    
            const startIndex = (currentPage - 1) * rowsPerPage;
            const endIndex = startIndex + rowsPerPage;
            const pageData = filteredData.slice(startIndex, endIndex);
    
            pageData.forEach(book => {
              const stockStatus = book.stock > 20 ? 'in-stock' : (book.stock > 0 ? 'low-stock' : 'out-of-stock');
              const stockText = book.stock > 20 ? 'In Stock' : (book.stock > 0 ? 'Low Stock' : 'Out of Stock');
              const row = `
                <tr>
                  <td>${book.isbn}</td>
                  <td>${book.title}</td>
                  <td>${book.author}</td>
                  <td>${book.category}</td>
                  <td>$${book.price.toFixed(2)}</td>
                  <td><span class="stock-badge ${stockStatus}">${stockText} (${book.stock})</span></td>
                  <td class="action-buttons">
                    <button class="btn btn-view" data-isbn="${book.isbn}"><i class="fas fa-eye"></i> View</button>
                    <button class="btn btn-edit" data-isbn="${book.isbn}"><i class="fas fa-edit"></i> Edit</button>
                    <button class="btn btn-delete" data-isbn="${book.isbn}"><i class="fas fa-trash"></i> Delete</button>
                  </td>
                </tr>
              `;
              tableBody.append(row);
            });
    
            updatePagination(filteredData.length);
          }
    
          function updatePagination(totalItems) {
            const totalPages = Math.ceil(totalItems / rowsPerPage);
            $('#page-info').text(`Page ${currentPage} of ${totalPages}`);
            $('#prev-page').toggleClass('disabled', currentPage === 1);
            $('#next-page').toggleClass('disabled', currentPage === totalPages);
          }
    
          $('#prev-page').click(function(e) {
            e.preventDefault();
            if (currentPage > 1) {
              currentPage--;
              renderTable();
            }
          });
    
          $('#next-page').click(function(e) {
            e.preventDefault();
            const totalPages = Math.ceil(booksData.length / rowsPerPage);
            if (currentPage < totalPages) {
              currentPage++;
              renderTable();
            }
          });
    
          $('#rows-per-page').change(function() {
            rowsPerPage = parseInt($(this).val());
            currentPage = 1;
            renderTable();
          });
    
          $('.search-bar .btn').click(function() {
            const searchTerm = $('.search-bar input').val().toLowerCase();
            filters = { title: searchTerm };
            currentPage = 1;
            renderTable();
          });
    
          $('.category-filter select').change(function() {
            const selectedCategory = $(this).val().toLowerCase();
            filters.category = selectedCategory;
            currentPage = 1;
            renderTable();
          });
    
          $('.sort-icon').click(function() {
            const column = $(this).data('column');
            if (sortColumn === column) {
              sortOrder = sortOrder === 'asc' ? 'desc' : 'asc';
            } else {
              sortColumn = column;
              sortOrder = 'asc';
            }
            renderTable();
          });
    
          $('.column-filter-icon').click(function(e) {
            e.stopPropagation();
            const dropdown = $(this).next('.column-filter-dropdown');
            $('.column-filter-dropdown').not(dropdown).hide();
            dropdown.toggle();
          });
    
          $('.column-filter-dropdown button').click(function(e) {
            e.preventDefault();
            const column = $(this).closest('.column-filter').find('.column-filter-icon').data('column');
            const inputs = $(this).siblings('input, select');
            if (inputs.length === 1) {
              filters[column] = inputs.val();
            } else if (inputs.length === 2) {
              const min = inputs.eq(0).val();
              const max = inputs.eq(1).val();
              filters[column] = [min, max];
    ""        }
            currentPage = 1;
            renderTable();
            $(this).closest('.column-filter-dropdown').hide();
          });
    
          $(document).click(function(e) {
            if (!$(e.target).closest('.column-filter').length) {
              $('.column-filter-dropdown').hide();
            }
          });
    
          $('#books-table').on('click', '.btn-view', function() {
            const isbn = $(this).data('isbn');
            const book = booksData.find(b => b.isbn === isbn);
            if (book) {
              const modalContent = `
                <div class="book-cover">
                  <img src="${book.coverImage}" alt="${book.title} cover" width="200">
                </div>
                <h3>Book Information</h3>
                <p><strong>ISBN:</strong> ${book.isbn}</p>
                <p><strong>Title:</strong> ${book.title}</p>
                <p><strong>Author:</strong> ${book.author}</p>
                <p><strong>Category:</strong> ${book.category}</p>
                <p><strong>Price:</strong> $${book.price.toFixed(2)}</p>
                <p><strong>Stock:</strong> ${book.stock}</p>
                <h3>Description</h3>
                <p>${book.description}</p>
              `;
              $('#bookDetails').html(modalContent);
              $('#viewBookModal').css('display', 'block');
            }
          });
    
          $('#books-table').on('click', '.btn-edit', function() {
            const isbn = $(this).data('isbn');
            const book = booksData.find(b => b.isbn === isbn);
            if (book) {
              $('#editIsbn').val(book.isbn);
              $('#editTitle').val(book.title);
              $('#editAuthor').val(book.author);
              $('#editCategory').val(book.category);
              $('#editPrice').val(book.price);
              $('#editStock').val(book.stock);
              $('#editDescription').val(book.description);
              $('#editCoverImage').val(book.coverImage);
              $('#editBookModal').css('display', 'block');
            }
          });
    
          $('#books-table').on('click', '.btn-delete', function() {
            const isbn = $(this).data('isbn');
            if (confirm('Are you sure you want to delete this book?')) {
              const index = booksData.findIndex(b => b.isbn === isbn);
              if (index !== -1) {
                booksData.splice(index, 1);
                renderTable();
              }
            }
          });
    
          $('.close').click(function() {
            $(this).closest('.modal').css('display', 'none');
          });
    
          $(window).click(function(event) {
            if ($(event.target).hasClass('modal')) {
              $('.modal').css('display', 'none');
            }
          });
    
          $('#editBookForm').submit(function(e) {
            e.preventDefault();
            const updatedBook = {
              isbn: $('#editIsbn').val(),
              title: $('#editTitle').val(),
              author: $('#editAuthor').val(),
              category: $('#editCategory').val(),
              price: parseFloat($('#editPrice').val()),
              stock: parseInt($('#editStock').val()),
              description: $('#editDescription').val(),
              coverImage: $('#editCoverImage').val()
            };
            const index = booksData.findIndex(b => b.isbn === updatedBook.isbn);
            if (index !== -1) {
              booksData[index] = updatedBook;
              renderTable();
              $('#editBookModal').css('display', 'none');
            }
          });
    
          $('.add-book-btn').click(function() {
            $('#addBookModal').css('display', 'block');
          });
    
          $('#addBookForm').submit(function(e) {
            e.preventDefault();
            const newBook = {
              isbn: $('#addIsbn').val(),
              title: $('#addTitle').val(),
              author: $('#addAuthor').val(),
              category: $('#addCategory').val(),
              price: parseFloat($('#addPrice').val()),
              stock: parseInt($('#addStock').val()),
              description: $('#addDescription').val(),
              coverImage: $('#addCoverImage').val()
            };
            booksData.push(newBook);
            renderTable();
            $('#addBookModal').css('display', 'none');
            $('#addBookForm')[0].reset();
          });
    
          $('.export-btn').click(function() {
            const csvContent = "data:text/csv;charset=utf-8," 
              + "ISBN,Title,Author,Category,Price,Stock\n"
              + booksData.map(book => `${book.isbn},"${book.title}","${book.author}",${book.category},${book.price},${book.stock}`).join("\n");
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "books_export.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
          });
    
          renderTable();
        });
      </script>
    </body>
    </html>